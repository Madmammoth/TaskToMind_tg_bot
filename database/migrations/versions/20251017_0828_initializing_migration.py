"""Initializing migration

Revision ID: 992347daaf5c
Revises: 
Create Date: 2025-10-17 08:28:58.656007

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = '992347daaf5c'
down_revision: Union[str, Sequence[str], None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('achievements',
    sa.Column('achievement_id', sa.Integer(), nullable=False),
    sa.Column('achievement_name', sa.String(length=100), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('emoji', sa.String(length=10), nullable=True),
    sa.Column('category', sa.String(length=50), nullable=True),
    sa.Column('is_secret', sa.Boolean(), nullable=False),
    sa.Column('is_progression', sa.Boolean(), nullable=False),
    sa.Column('required_count', sa.Integer(), nullable=True),
    sa.Column('previous_achievement_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['previous_achievement_id'], ['achievements.achievement_id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('achievement_id')
    )
    op.bulk_insert(
        sa.table(
            "achievements",
            sa.Column('achievement_id', sa.Integer()),
            sa.column('achievement_name', sa.String(length=100)),
            sa.Column('description', sa.Text()),
            sa.Column('emoji', sa.String(length=10)),
            sa.Column('category', sa.String(length=50)),
            sa.Column('is_secret', sa.Boolean()),
            sa.Column('is_progression', sa.Boolean()),
            sa.Column('required_count', sa.Integer()),
            sa.Column('previous_achievement_id', sa.Integer())
        ),
        [
            {
                "achievement_id": 1,
                "achievement_name": "ÐŸÐµÑ€Ð²Ñ‹Ð¹ ÑˆÐ°Ð³",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",
                "emoji": "ðŸ¦¶",
                "category": "tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 2,
                "achievement_name": "ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð¿ÑƒÑ‚Ð¸",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 5 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“",
                "category": "tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 5,
                "previous_achievement_id": 1,
            },
            {
                "achievement_id": 3,
                "achievement_name": "Ð¡Ð¸Ð»Ð° Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐºÐ¸",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ’ª",
                "category": "tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 2,
            },
            {
                "achievement_id": 4,
                "achievement_name": "Ð’ÑÑ‘ Ð¿Ð¾ Ð¿Ð»Ð°Ð½Ñƒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 50 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“…",
                "category": "tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 50,
                "previous_achievement_id": 3,
            },
            {
                "achievement_id": 5,
                "achievement_name": "ÐœÐ°ÑÑ‚ÐµÑ€ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 100 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ‘·",
                "category": "tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 100,
                "previous_achievement_id": 4,
            },
            {
                "achievement_id": 6,
                "achievement_name": "ÐŸÐµÑ€Ð²Ñ‹Ð¹ ÑƒÑÐ¿ÐµÑ…",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",
                "emoji": "ðŸŽ¯",
                "category": "tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 7,
                "achievement_name": "ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð¿Ð¾Ð±ÐµÐ´",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 5 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "âœ…",
                "category": "tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 5,
                "previous_achievement_id": 6,
            },
            {
                "achievement_id": 8,
                "achievement_name": "Ð£ÑÐµÑ€Ð´Ð½Ñ‹Ð¹ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 10 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“˜",
                "category": "tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 7,
            },
            {
                "achievement_id": 9,
                "achievement_name": "Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð²Ð¿ÐµÑ€Ñ‘Ð´",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 50 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸš€",
                "category": "tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 50,
                "previous_achievement_id": 8,
            },
            {
                "achievement_id": 10,
                "achievement_name": "Ð–ÐµÐ»ÐµÐ·Ð½Ð°Ñ Ð²Ð¾Ð»Ñ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 100 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ¦¾",
                "category": "tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 100,
                "previous_achievement_id": 9,
            },
            {
                "achievement_id": 11,
                "achievement_name": "Ð“Ð°Ð»Ñ, Ñƒ Ð½Ð°Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð°!",
                "description": "ÐžÑ‚Ð¼ÐµÐ½Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",
                "emoji": "âŒ",
                "category": "tasks_cancelled",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 12,
                "achievement_name": "ÐœÐ°ÑÑ‚ÐµÑ€ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€Ð¾Ðº",
                "description": "Â«Ð¯ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð», Ð½Ð¾ Ñ‚ÑƒÑ‚ Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð¾...Â» â€” "
                               "Ð¾Ñ‚Ð¼ÐµÐ½Ð¸ 10 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ’¬",
                "category": "tasks_cancelled",
                "is_secret": True,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 13,
                "achievement_name": "ÐÑ€Ð°Ð³Ð¾Ñ€Ð½ Ñ€Ð°Ð·Ñ€ÐµÑˆÐ¸Ð»",
                "description": "Â«ÐœÐ¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð´Ñ‘Ñ‚ Ñ‡Ð°Ñ, Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ðµ ÑÐµÐ³Ð¾Ð´Ð½Ñ!Â» â€” "
                               "Ð¾Ñ‚Ð¼ÐµÐ½Ð¸ 50 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ—¡ï¸",
                "category": "tasks_cancelled",
                "is_secret": True,
                "is_progression": True,
                "required_count": 50,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 14,
                "achievement_name": "ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚Ð¾Ñ€ Ñ…Ð°Ð¾ÑÐ°",
                "description": "Ð¡Ñ‚Ñ€Ð¾Ð¸ÑˆÑŒ Ð¿Ð»Ð°Ð½Ñ‹, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ñ… Ð¾Ñ‚Ð¼ÐµÐ½ÑÑ‚ÑŒ â€” "
                               "Ð¾Ñ‚Ð¼ÐµÐ½Ð¸ 100 Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ—ï¸ï¸",
                "category": "tasks_cancelled",
                "is_secret": True,
                "is_progression": True,
                "required_count": 100,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 15,
                "achievement_name": "Ð”ÐµÐ¶Ð°Ð²ÑŽ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰ÑƒÑŽÑÑ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",
                "emoji": "ðŸ’«",
                "category": "recurring_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 16,
                "achievement_name": "ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½ÑÑ‚Ð²Ð¾",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“†",
                "category": "recurring_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 15,
            },
            {
                "achievement_id": 17,
                "achievement_name": "ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 50 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ¤–",
                "category": "recurring_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 50,
                "previous_achievement_id": 16,
            },
            {
                "achievement_id": 18,
                "achievement_name": "Ð’Ð°Ð¶Ð½Ð°Ñ Ð¼ÐµÐ»Ð¾Ñ‡ÑŒ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð½Ð¸Ð·ÐºÐ¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "ðŸ’¡ðŸŸ¢",
                "category": "low_priority_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 19,
                "achievement_name": "ÐœÐµÐ»Ð¾Ñ‡ÑŒ, Ð° Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð½Ð¸Ð·ÐºÐ¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "â—ï¸ðŸŸ¢",
                "category": "low_priority_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 20,
                "achievement_name": "Ð’Ð°Ð¶Ð½Ð¾ Ð½Ðµ Ð·Ð°Ð±Ñ‹Ñ‚ÑŒ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ ÑÐ¾ ÑÑ€ÐµÐ´Ð½Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "ðŸ’¡ðŸŸ¡",
                "category": "medium_priority_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 21,
                "achievement_name": "ÐžÑ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ ÑÐ¾ ÑÑ€ÐµÐ´Ð½Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "â—ï¸ðŸŸ¡",
                "category": "medium_priority_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 22,
                "achievement_name": "ÐžÑ‚ Ñ‚ÐµÐ±Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "ðŸ’¡ðŸ”´",
                "category": "high_priority_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 23,
                "achievement_name": "Ð¡Ð¿Ð°ÑÐ¸Ñ‚ÐµÐ»ÑŒ Ð´Ð½Ñ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼",
                "emoji": "â—ï¸ðŸ”´",
                "category": "high_priority_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 24,
                "achievement_name": "Ð¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð½Ð¸Ð·ÐºÐ¾Ð¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "â°ðŸŸ¢",
                "category": "low_urgency_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 25,
                "achievement_name": "Ð¡Ð²Ð¾ÐµÐ²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð½Ð¸Ð·ÐºÐ¾Ð¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "âš¡ðŸŸ¢",
                "category": "low_urgency_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 26,
                "achievement_name": "ÐŸÐ»Ð°Ð½ Ð½Ð° Ð·Ð°Ð²Ñ‚Ñ€Ð°. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ ÑÐ¾ ÑÑ€ÐµÐ´Ð½ÐµÐ¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "â°ðŸŸ¡",
                "category": "medium_urgency_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 27,
                "achievement_name": "Ð’ Ñ€Ð¸Ñ‚Ð¼Ðµ Ð´Ð½Ñ. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ ÑÐ¾ ÑÑ€ÐµÐ´Ð½ÐµÐ¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "âš¡ðŸŸ¡",
                "category": "medium_urgency_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 28,
                "achievement_name": "Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð². 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "â°ðŸ”´",
                "category": "high_urgency_tasks_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 29,
                "achievement_name": "ÐŸÐ¾Ð´ Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ð¾Ð¼. 1 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 1 Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ ÑÑ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ",
                "emoji": "âš¡ðŸ”´",
                "category": "high_urgency_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 30,
                "achievement_name": "ÐÐ¾Ð²Ð°Ñ Ð¿Ð°Ð¿ÐºÐ°",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“‚",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 31,
                "achievement_name": "ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¸Ð·Ð°Ñ‚Ð¾Ñ€",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 3 ÑÐ¿Ð¸ÑÐºÐ° Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ—‚",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 3,
                "previous_achievement_id": 30,
            },
            {
                "achievement_id": 32,
                "achievement_name": "ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¾Ð½ÐµÑ€",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 5 ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ“š",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 5,
                "previous_achievement_id": 31,
            },
            {
                "achievement_id": 33,
                "achievement_name": "ÐÑ€Ñ…Ð¸Ð²Ð°Ñ€Ð¸ÑƒÑ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ—„ï¸",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 32,
            },
            {
                "achievement_id": 34,
                "achievement_name": "Ð¡Ð¿Ð¸ÑÐºÐ¾Ð² Ð¼Ð½Ð¾Ð³Ð¾ Ð½Ðµ Ð±Ñ‹Ð²Ð°ÐµÑ‚",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 25 ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ§¾",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 25,
                "previous_achievement_id": 33,
            },
            {
                "achievement_id": 35,
                "achievement_name": "Ð¥Ñ€Ð°Ð½Ð¸Ñ‚ÐµÐ»ÑŒ Ð²ÑÐµÐ»ÐµÐ½Ð½Ð¾Ð¹",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 50 ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸŒŒ",
                "category": "lists_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 50,
                "previous_achievement_id": 34,
            },
            {
                "achievement_id": 36,
                "achievement_name": "Ð¯ â€” Ð½Ðµ Ð¾Ð´Ð¸Ð½",
                "description": "ÐŸÐ¾Ð´ÐµÐ»Ð¸ÑÑŒ Ð·Ð°Ð´Ð°Ñ‡ÐµÐ¹",
                "emoji": "ðŸ§‘â€ðŸ¤â€ðŸ§‘",
                "category": "tasks_shared",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 37,
                "achievement_name": "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ñ‹Ð¹ Ð¸Ð³Ñ€Ð¾Ðº",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ Ð¾Ð±Ñ‰ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",
                "emoji": "ðŸ¤",
                "category": "shared_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 38,
                "achievement_name": "Ð“ÐµÑ€Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹",
                "description": "Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸ 10 Ð¾Ð±Ñ‰Ð¸Ñ… Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ¦¸",
                "category": "shared_tasks_completed",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 37,
            },
            {
                "achievement_id": 39,
                "achievement_name": "ÐžÐ±Ñ‰ÐµÐµ Ð´ÐµÐ»Ð¾",
                "description": "ÐŸÐ¾Ð´ÐµÐ»Ð¸ÑÑŒ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ð·Ð°Ð´Ð°Ñ‡",
                "emoji": "ðŸ› ï¸",
                "category": "lists_shared",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 40,
                "achievement_name": "Ð¢Ð²Ð¾Ñ€ÐµÑ† Ñ‚ÐµÐ³Ð¾Ð²",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ‚ÐµÐ³",
                "emoji": "âœ¨",
                "category": "tags_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 41,
                "achievement_name": "Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐµÑˆÑŒÑÑ",
                "description": "Ð”Ð¾Ð±Ð°Ð²ÑŒ Ðº Ð·Ð°Ð´Ð°Ñ‡Ðµ Ñ‚ÐµÐ³",
                "emoji": "ðŸ·ï¸",
                "category": "tasks_tagged",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 42,
                "achievement_name": "Ð¢ÐµÐ³Ð¾Ð¼Ð°Ð½",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 Ñ‚ÐµÐ³Ð¾Ð²",
                "emoji": "ðŸ—ƒï¸ï¸",
                "category": "tags_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 40,
            },
            {
                "achievement_id": 43,
                "achievement_name": "Ð¢ÐµÐ³Ð¾Ð¼Ð°Ð½ÑŒÑÐº",
                "description": "Ð”Ð¾Ð±Ð°Ð²ÑŒ 10 Ñ‚ÐµÐ³Ð¾Ð² Ðº Ð¾Ð´Ð½Ð¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡Ðµ",
                "emoji": "ðŸ”–ï¸",
                "category": "tags_per_task",
                "is_secret": True,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 44,
                "achievement_name": "ÐŸÑ€Ð¾ÑÑ‚Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ",
                "description": "ÐžÑ‚Ð»Ð¾Ð¶Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð½Ð° Ð¿Ð¾Ñ‚Ð¾Ð¼",
                "emoji": "â¸ï¸",
                "category": "postpones_per_task",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 45,
                "achievement_name": "ÐŸÑ€Ð¾ÐºÑ€Ð°ÑÑ‚Ð¸Ð½Ð°Ñ‚Ð¾Ñ€",
                "description": "ÐžÑ‚Ð»Ð¾Ð¶Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ 5 Ñ€Ð°Ð·",
                "emoji": "ðŸ›‹ï¸",
                "category": "postpones_per_task",
                "is_secret": True,
                "is_progression": True,
                "required_count": 5,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 46,
                "achievement_name": "ÐœÐ°ÑÑ‚ÐµÑ€ Ð¾Ñ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°Ð½Ð¸Ñ",
                "description": "ÐžÑ‚Ð»Ð¾Ð¶Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ 10 Ñ€Ð°Ð·",
                "emoji": "â°",
                "category": "postpones_per_task",
                "is_secret": True,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 47,
                "achievement_name": "ÐŸÐµÑ€Ð²Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ",
                "emoji": "ðŸ””",
                "category": "reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 48,
                "achievement_name": "Ð¡Ð»ÐµÐ´Ð¸ Ð·Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹",
                "emoji": "â±ï¸",
                "category": "reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 47,
            },
            {
                "achievement_id": 49,
                "achievement_name": "ÐœÐ°ÑÑÑ‚Ñ€Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 100 Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹",
                "emoji": "ðŸŽ¶",
                "category": "reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 100,
                "previous_achievement_id": 48,
            },
            {
                "achievement_id": 50,
                "achievement_name": "ÐŸÐµÑ€Ð²Ð¾Ðµ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÐµÐ½Ð¸Ðµ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 1 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰ÐµÐµÑÑ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ",
                "emoji": "ðŸ”„",
                "category": "recurring_reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 1,
                "previous_achievement_id": None,
            },
            {
                "achievement_id": 51,
                "achievement_name": "Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¸Ðº",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 10 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹",
                "emoji": "ðŸ“…",
                "category": "recurring_reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 10,
                "previous_achievement_id": 50,
            },
            {
                "achievement_id": 52,
                "achievement_name": "Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ÑÑ‚ÑŒ",
                "description": "Ð¡Ð¾Ð·Ð´Ð°Ð¹ 100 Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹",
                "emoji": "ðŸ””",
                "category": "recurring_reminders_created",
                "is_secret": False,
                "is_progression": True,
                "required_count": 100,
                "previous_achievement_id": 51,
            },
        ],
    )
    op.create_table('lists',
    sa.Column('list_id', sa.Integer(), nullable=False),
    sa.Column('list_name', sa.String(length=64), nullable=False),
    sa.Column('parent_list_id', sa.Integer(), nullable=True),
    sa.Column('is_shared', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['parent_list_id'], ['lists.list_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('list_id')
    )
    op.create_table('recurrence_rules',
    sa.Column('rule_id', sa.Integer(), nullable=False),
    sa.Column('frequency', sa.String(length=20), nullable=True),
    sa.Column('interval', sa.Integer(), nullable=True),
    sa.Column('pattern', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('rule_id')
    )
    op.create_table('users',
    sa.Column('telegram_id', sa.BigInteger(), nullable=False),
    sa.Column('username', sa.String(length=32), nullable=True),
    sa.Column('first_name', sa.String(length=64), nullable=True),
    sa.Column('last_name', sa.String(length=64), nullable=True),
    sa.Column('gender', sa.Enum('MALE', 'FEMALE', 'OTHER', name='genderenum'), nullable=False),
    sa.Column('timezone_name', sa.String(length=50), nullable=False),
    sa.Column('timezone_offset', sa.Interval(), nullable=False),
    sa.Column('last_active', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('is_stopped_bot', sa.Boolean(), nullable=False),
    sa.Column('stopped_count', sa.SmallInteger(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('telegram_id')
    )
    op.create_table('list_access',
    sa.Column('list_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('role', sa.Enum('OWNER', 'EDITOR', 'VIEWER', name='accessroleenum'), nullable=False),
    sa.Column('granted_by', sa.BigInteger(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['granted_by'], ['users.telegram_id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['list_id'], ['lists.list_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('list_id', 'user_id')
    )
    op.create_table('tags',
    sa.Column('tag_id', sa.Integer(), nullable=False),
    sa.Column('tag_name', sa.String(length=64), nullable=False),
    sa.Column('parent_tag_id', sa.Integer(), nullable=True),
    sa.Column('creator_id', sa.BigInteger(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['creator_id'], ['users.telegram_id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['parent_tag_id'], ['tags.tag_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('tag_id'),
    sa.UniqueConstraint('tag_name', 'creator_id', name='uq_tag_name_creator')
    )
    op.bulk_insert(
        sa.table(
            "tags",
            sa.column("tag_name", sa.String(length=64)),
        ),
        [
            {"tag_name": "Ð½Ð°-Ñ€Ð°Ð±Ð¾Ñ‚Ðµ"},
            {"tag_name": "Ð´Ð¾Ð¼Ð°"},
            {"tag_name": "ÑƒÑ‡Ñ‘Ð±Ð°"},
            {"tag_name": "Ñ…Ð¾Ð±Ð±Ð¸"},
            {"tag_name": "Ð¾Ñ‚Ð¿ÑƒÑÐº"},
            {"tag_name": "Ð·Ð²Ð¾Ð½Ð¾Ðº"},
            {"tag_name": "ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ"},
            {"tag_name": "Ð¸Ð´ÐµÑ"},
            {"tag_name": "Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²ÐµÐ½Ð¸Ðµ"},
            {"tag_name": "Ð¿Ð¾Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ"},
            {"tag_name": "ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€"},
            {"tag_name": "Ð¿Ð¾Ñ‚Ð¾Ð¼"},
            {"tag_name": "Ð¶Ð´Ñƒ"},
        ],
    )
    op.create_table('tasks',
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=64), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('creator_id', sa.BigInteger(), nullable=False),
    sa.Column('priority', sa.Enum('HIGH', 'MEDIUM', 'LOW', name='levelenum'), nullable=False),
    sa.Column('urgency', sa.Enum('HIGH', 'MEDIUM', 'LOW', name='levelenum'), nullable=False),
    sa.Column('status', sa.Enum('NEW', 'IN_PROGRESS', 'DONE', 'CANCELLED', name='taskstatusenum'), nullable=False),
    sa.Column('is_shared', sa.Boolean(), nullable=False),
    sa.Column('owner_id', sa.BigInteger(), nullable=False),
    sa.Column('parent_task_id', sa.Integer(), nullable=True),
    sa.Column('deadline', sa.DateTime(timezone=True), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('cancelled_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('postponed_count', sa.Integer(), nullable=True),
    sa.Column('is_recurring', sa.Boolean(), nullable=False),
    sa.Column('recurrence_rule_id', sa.Integer(), nullable=True),
    sa.Column('duration', sa.BigInteger(), nullable=True),
    sa.Column('remind', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.CheckConstraint('cancelled_at IS NULL OR cancelled_at >= created_at', name='chk_cancelled_after_created'),
    sa.CheckConstraint('completed_at IS NULL OR completed_at >= created_at', name='chk_complete_after_created'),
    sa.ForeignKeyConstraint(['creator_id'], ['users.telegram_id'], ),
    sa.ForeignKeyConstraint(['owner_id'], ['users.telegram_id'], ),
    sa.ForeignKeyConstraint(['parent_task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['recurrence_rule_id'], ['recurrence_rules.rule_id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('task_id')
    )
    op.create_table('user_achievements',
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('achievement_id', sa.Integer(), nullable=False),
    sa.Column('unlocked_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('progress', sa.Integer(), nullable=True),
    sa.Column('is_completed', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['achievement_id'], ['achievements.achievement_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('user_id', 'achievement_id'),
    sa.UniqueConstraint('user_id', 'achievement_id')
    )
    op.create_table('user_lists',
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('list_id', sa.Integer(), nullable=False),
    sa.Column('is_owner', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['list_id'], ['lists.list_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('user_id', 'list_id')
    )
    op.create_table('user_stats',
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('tasks_created', sa.Integer(), nullable=False),
    sa.Column('tasks_completed', sa.Integer(), nullable=False),
    sa.Column('tasks_postponed', sa.Integer(), nullable=False),
    sa.Column('tasks_canceled', sa.Integer(), nullable=False),
    sa.Column('tasks_shared', sa.Integer(), nullable=False),
    sa.Column('shared_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('shared_tasks_postponed', sa.Integer(), nullable=False),
    sa.Column('shared_tasks_canceled', sa.Integer(), nullable=False),
    sa.Column('recurring_tasks_created', sa.Integer(), nullable=False),
    sa.Column('recurring_tasks_deleted', sa.Integer(), nullable=False),
    sa.Column('low_priority_tasks_created', sa.Integer(), nullable=False),
    sa.Column('medium_priority_tasks_created', sa.Integer(), nullable=False),
    sa.Column('high_priority_tasks_created', sa.Integer(), nullable=False),
    sa.Column('low_urgency_tasks_created', sa.Integer(), nullable=False),
    sa.Column('medium_urgency_tasks_created', sa.Integer(), nullable=False),
    sa.Column('high_urgency_tasks_created', sa.Integer(), nullable=False),
    sa.Column('low_priority_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('medium_priority_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('high_priority_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('low_urgency_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('medium_urgency_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('high_urgency_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('postpones_per_task', sa.Integer(), nullable=False),
    sa.Column('tasks_completed_before_deadline', sa.Integer(), nullable=False),
    sa.Column('tasks_completed_after_deadline', sa.Integer(), nullable=False),
    sa.Column('checked_tasks_created', sa.Integer(), nullable=False),
    sa.Column('checked_tasks_completed', sa.Integer(), nullable=False),
    sa.Column('checked_tasks_canceled', sa.Integer(), nullable=False),
    sa.Column('lists_created', sa.Integer(), nullable=False),
    sa.Column('lists_deleted', sa.Integer(), nullable=False),
    sa.Column('lists_shared', sa.Integer(), nullable=False),
    sa.Column('tags_created', sa.Integer(), nullable=False),
    sa.Column('tags_deleted', sa.Integer(), nullable=False),
    sa.Column('tasks_tagged', sa.Integer(), nullable=False),
    sa.Column('tags_assigned', sa.Integer(), nullable=False),
    sa.Column('tags_per_task', sa.Integer(), nullable=False),
    sa.Column('reminders_created', sa.Integer(), nullable=False),
    sa.Column('reminders_deleted', sa.Integer(), nullable=False),
    sa.Column('recurring_reminders_created', sa.Integer(), nullable=False),
    sa.Column('recurring_reminders_deleted', sa.Integer(), nullable=False),
    sa.Column('recurrence_rules_created', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('user_id')
    )
    op.create_table('activity_logs',
    sa.Column('log_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.BigInteger(), nullable=True),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('list_id', sa.Integer(), nullable=True),
    sa.Column('action', sa.String(length=50), nullable=False),
    sa.Column('old_value', sa.Text(), nullable=True),
    sa.Column('new_value', sa.Text(), nullable=True),
    sa.Column('extra', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('success', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['list_id'], ['lists.list_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('log_id')
    )
    op.create_table('reminders',
    sa.Column('reminder_id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('remind_at', sa.DateTime(timezone=True), nullable=False),
    sa.Column('recurrence_rule_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'SENT', 'CANCELLED', name='reminderstatusenum'), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['recurrence_rule_id'], ['recurrence_rules.rule_id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('reminder_id')
    )
    op.create_table('task_access',
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('role', sa.Enum('OWNER', 'EDITOR', 'VIEWER', name='accessroleenum'), nullable=False),
    sa.Column('granted_by', sa.BigInteger(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['granted_by'], ['users.telegram_id'], ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('task_id', 'user_id')
    )
    op.create_table('task_tags',
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('tag_id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['tag_id'], ['tags.tag_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('task_id', 'tag_id')
    )
    op.create_table('user_tags',
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('tag_id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['tag_id'], ['tags.tag_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('user_id', 'tag_id')
    )
    op.create_table('user_task_lists',
    sa.Column('user_id', sa.BigInteger(), nullable=False),
    sa.Column('list_id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('is_owner', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['list_id'], ['lists.list_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.task_id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['user_id'], ['users.telegram_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('user_id', 'list_id', 'task_id')
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('user_task_lists')
    op.drop_table('user_tags')
    op.drop_table('task_tags')
    op.drop_table('task_access')
    op.drop_table('reminders')
    op.drop_table('activity_logs')
    op.drop_table('user_stats')
    op.drop_table('user_lists')
    op.drop_table('user_achievements')
    op.drop_table('tasks')
    op.drop_table('tags')
    op.drop_table('list_access')
    op.drop_table('users')
    op.drop_table('recurrence_rules')
    op.drop_table('lists')
    op.drop_table('achievements')
    # ### end Alembic commands ###
