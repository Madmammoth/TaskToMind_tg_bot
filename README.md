# TaskToMind

Telegram-бот для управления задачами (личный ассистент для продуктивности / "second brain").

Проект используется как практическая площадка для разработки production-подобного backend на Python: архитектура, БД, инфраструктура, тестирование и асинхронная обработка событий.

---

## Функциональность (текущее состояние)

Реализовано:

- создание / редактирование / удаление задач
- создание и удаление списков задач
- изменение приоритета и срочности
- отметка выполнения/отмены
- хранение состояния пользователя
- логирование активности
- подсчёт достижений/статистики
- UI через aiogram-dialog

В разработке:

- уведомления и напоминания
- сортировка и фильтрация
- теги
- возможность делиться задачами и списками задач
- очереди фоновых задач
- расширение до "second brain" (каталогизация информации)
- интеграция LLM для более естественного взаимодействия

---

## Стек

- Python 3.13
- aiogram 3
- aiogram-dialog
- PostgreSQL + pgAdmin
- SQLAlchemy 2
- Alembic (миграции)
- Redis
- pytest + pytest-asyncio
- Docker / docker-compose
- uv
- psycopg3
- environs

---

## Запуск проекта

### 1. Клонирование
при помощи HTTPS:
```bash
git clone https://github.com/Madmammoth/TaskToMind_tg_bot.git
```
или при помощи SSH:
```bash
git clone git@github.com:Madmammoth/TaskToMind_tg_bot.git
```
Затем перейти в папку проекта:
```bash
cd TaskToMind_tg_bot
```

### 2. Переменные окружения

Создайте файл ```.env```, скопировав ```.env.example```:
```bash
cp .env.example .env
```
Обязательно измените значения переменных ```BOT_TOKEN``` и ```OWNER_ID``` на **свои токен и телеграм-id**  
(Получить токен — в официальном телеграм-боте BotFather)  


### 3. Запуск бота

#### 3.1. Рекомендуемый способ (Docker)
Полный запуск инфраструктуры и бота:
```bash
docker compose up --build
```

Команда автоматически:
- поднимает PostgreSQL и Redis
- дожидается готовности сервисов
- применяет Alembic миграции
- запускает бота

#### 3.2. Альтернативный способ
Локальный запуск (подходит для разработки и отладки).  
##### 3.2.1. Поднять инфраструктуру
```bash
docker compose up postgres redis
```
##### 3.2.2. Переменные окружения  
Для локального запуска нужно подключаться через ```localhost```:
```
POSTGRES_HOST=localhost
REDIS_HOST=localhost
```
Можно:
- изменить ```.env```
- задать переменные в Run Configuration IDE

##### 3.2.3. Установка зависимостей
Через ```uv``` (рекомендуется):
```bash
uv sync
```
или ```pip```:
- активация виртуального окружения:
```bash
python -m venv .venv
```
- установка зависимостей:
```bash
pip install .
```

##### 3.2.4. Применение миграций
```bash
python -m alembic upgrade head
```

##### 3.2.5. Запуск бота
```bash
python main.py
```


---

## Тесты

pytest

Запуск:
```bash
python -m pytest
```

Покрываются:

- handlers
- CRUD
- сериализация
- бизнес-логика

---

## Архитектура

Проект построен по принципам разделения ответственности:

- app/  
  - bot/ — Telegram слой (handlers, dialogs, middleware)
  - database/  
    - models/ — ORM модели  
    - crud/ — низкоуровневые запросы  
    - services/ — бизнес-логика  
    - orchestration/ — композиция use-cases  
  - di/ — dependency injection  
  - config_data/ — конфигурация  
  - utils/ — общие утилиты
- tests/ — unit-тесты

Подход:
- слоистая архитектура
- DI
- изоляция инфраструктуры от бизнес-логики
- unit-тестирование доменных компонентов

---

## Цель проекта

Отработка навыков backend-разработки:

- проектирование архитектуры
- работа с БД и миграциями
- асинхронность
- кэширование
- тестирование
- инфраструктура и Docker
- подготовка к коммерческой разработке

---

## Статус
Активная разработка.  
Проект используется для отработки архитектурных решений и инфраструктурных практик, приближённых к коммерческим.

---